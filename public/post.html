<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="navbar">
      <a href="feed.html">SNACK  FEED</a>
      <a href="random.html">RANDOM  SNACK</a>
      <a href="post.html">POST  SNACK</a>
      </div>
      <div class="note"></div>
      <form method="post" action="/posts">
        <p1>
          <input class="messageInput" type="text" name="message" placeholder="message goes here">
        </p1>
        <p2>
          <input type="text" class="url" name="url" placeholder="Show me dat url of snack!" >
        </p2>
        <p3>
          <input class="nameInput" name="author" placeholder="what's your name?">
        </p3>
        <p4>
         <input type="radio" class="flavourInput" name="flavourprofile" value="Sweet">Sweet<br>
        <input type="radio" class="flavourInput" name="flavourprofile" value="Savoury">Savoury<br>
        <input type="radio" class="flavourInput" name="flavourprofile" value="Bitter">Bitter<br>
        <input type="radio" class="flavourInput" name="flavourprofile" value="Sour">Sour<br>
        <input type="radio" class="flavourInput" name="flavourprofile" value="Spicy">Spicy<br>
        <input type="radio" class="flavourInput" name="flavourprofile" value="Umami">Umami<br>
        </p4>
        <p5>
          <button class="postButton">Post it!</button>
        </p5>
      </form>

      <script>
      function sendMessageToServer(e) {
        let data = {};
        data.message = document.querySelector(".messageInput").value;
        data.url = document.querySelector(".url").value;
        data.author = document.querySelector(".nameInput").value;
        data.flavour = document.querySelector('input[name="flavourprofile"]:checked').value;

        console.log(data)

          e.preventDefault();
          fetch("/posts", {
            method:"POST",
            body: JSON.stringify(data),
            headers: {'Content-Type': 'application/json'}

            let postIdNumber = parseInt(request.body.postId);
            posts = posts.filter(post => post.id != postIdNumber);
          });
       document.querySelector(".note").innerHTML = "Thanks! Your message was saved!";
      }

      document.querySelector(".postButton").addEventListener("click", sendMessageToServer);
      </script>


</body>
</html>
